(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12d8c88a"],{2532:function(t,e,a){"use strict";var n=a("23e7"),r=a("5a34"),s=a("1d80"),i=a("ab13");n({target:"String",proto:!0,forced:!i("includes")},{includes:function(t){return!!~String(s(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,e,a){var n=a("861d"),r=a("c6b6"),s=a("b622"),i=s("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==r(t))}},"5a34":function(t,e,a){var n=a("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},"7a35":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",[a("button",{staticClass:"btn btn-primary btn-sm mr-1",on:{click:t._generateBackup}},[t._v("Generate backup")]),a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.$bvModal.show("modal-restore")}}},[t._v("Restore data")])]),a("button",{staticClass:"btn-sm btn btn-white",attrs:{title:"Informasi"},on:{click:function(e){return t.featureInfo("backup_system")}}},[a("i",{staticClass:"flaticon-info"})])])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"alert alert-warning"},[a("strong",[t._v("Secret key: "+t._s(t.secret))]),a("br"),t._v(" Jaga kerahasiaan secret key, gunakan ini sebagai APP_KEY pada aplikasi restore ")]),t._m(0),t._m(1),a("table",{staticClass:"table table-sm table-hovered table-bordered table-strip"},[t._m(2),a("tbody",t._l(t.backups,(function(e,n){return a("tr",[a("td",{attrs:{width:"50px"}},[t._v(t._s(n+1))]),a("td",[t._v(" "+t._s(e.bak_type)+" "),a("br"),"SUCCESS"==e.status&&"BACKUP"==e.bak_type?a("a",{attrs:{href:"#"},on:{click:function(a){return t.downloadFileBackup(e.id)}}},[t._v("Download")]):t._e()]),a("td",[t._v(t._s(e.status))]),a("td",[t._v(t._s(e.generated_date))]),a("td",[t._v(t._s(e.version))]),a("td",[a("div",{},[a("pre",[a("code",[t._v(t._s(JSON.stringify(JSON.parse(e.detail),null,4)))])])])])])})),0)])]),a("div",{staticClass:"card-footer"})])]),a("b-modal",{attrs:{id:"modal-restore",size:"lg"},scopedSlots:t._u([{key:"modal-header",fn:function(e){e.close;return[a("h5",[t._v("Restore Exo-CBT data")])]}},{key:"modal-footer",fn:function(e){var n=e.cancel;return[a("b-button",{attrs:{size:"sm",variant:"secondary",disabled:t.isLoading},on:{click:function(t){return n()}}},[t._v(" Cancel ")])]}}])},[a("div",[a("div",{staticClass:"input-group"},[a("div",{staticClass:"custom-file"},[a("input",{ref:"fileupload",staticClass:"custom-file-input",attrs:{type:"file"},on:{change:t.onFileChange}}),a("label",{staticClass:"custom-file-label"},[t._v(t._s(t.label?t.label:"Pilih file backup..."))])]),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.isLoading},on:{click:t.uploadFile}},[t._v(t._s(t.isLoading?"Processing...":"Upload"))])])])])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alert alert-info"},[a("strong",[t._v("Data yang akan di-backup")]),a("br"),a("ul",[a("li",[t._v("Jurusan")]),a("li",[t._v("Matpel")]),a("li",[t._v("Banksoal, Soal & Jawaban soal")]),a("li",[t._v("Filemedia")]),a("li",[t._v("Peserta")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alert alert-warning"},[t._v(" Pastikan "),a("u",[t._v("upload_max_filesize")]),t._v(" & "),a("u",[t._v("post_max_size")]),t._v(" pada php.ini sudah di set sebesar file backup ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("#")]),a("th",[t._v("Tipe")]),a("th",[t._v("Status")]),a("th",[t._v("Tanggal generate")]),a("th",[t._v("Versi")]),a("th",[t._v("Data")])])])}],s=(a("caad"),a("baa5"),a("b0c0"),a("d3b7"),a("2532"),a("96cf"),a("1da1")),i=a("5530"),c=a("2f62"),o=a("cecb"),l={data:function(){return{secret:"",label:"",file:{},allow:["exo"]}},computed:Object(i["a"])(Object(i["a"])({},Object(c["e"])(["isLoading"])),Object(c["e"])("backup",["backups"])),methods:Object(i["a"])(Object(i["a"])({},Object(c["b"])("backup",["getBackups","generateBackup","uploadBackup","getProxyDownload"])),{},{_getBackups:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getBackups();case 3:a=e.sent,t.secret=a,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},_generateBackup:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.$store.commit("LOADING_PAGE",!0),e.next=4,t.generateBackup();case 4:t._getBackups(),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:return e.prev=9,t.$store.commit("LOADING_PAGE",!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,7,9,12]])})))()},featureInfo:function(){},onFileChange:function(t){this.label=t.target.files[0].name,this.file=t.target.files[0]},uploadFile:function(t){var e=this,a=this.label.substring(this.label.lastIndexOf(".")+1);if(this.allow.includes(a)){var n=new FormData;n.append("file",this.file),this.uploadBackup(n).then((function(t){e.file="",e.label="",e.$bvModal.hide("modal-restore"),e.$bvToast.toast("Peserta berhasil diimport.",o["a"].success)})).catch((function(t){e.$refs.fileupload.value=null,e.file="",e.label="",e.$bvToast.toast(t.message,o["a"].error)})).finally((function(){e._getBackups()}))}else this.$bvToast.toast("Hanya format exo yang diizinkan",o["a"].error)},downloadFileBackup:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.$store.commit("LOADING_PAGE",!0),a.next=4,e.getProxyDownload(t);case 4:n=a.sent,window.open(n.data,"_self"),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),e.$bvToast.toast(a.t0.message,o["a"].error);case 11:return a.prev=11,e.$store.commit("LOADING_PAGE",!1),a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[0,8,11,14]])})))()}}),created:function(){this._getBackups()}},u=l,d=a("2877"),f=Object(d["a"])(u,n,r,!1,null,null,null);e["default"]=f.exports},ab13:function(t,e,a){var n=a("b622"),r=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[r]=!1,"/./"[t](e)}catch(n){}}return!1}},baa5:function(t,e,a){var n=a("23e7"),r=a("e58c");n({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},caad:function(t,e,a){"use strict";var n=a("23e7"),r=a("4d64").includes,s=a("44d2"),i=a("ae40"),c=i("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!c},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},e58c:function(t,e,a){"use strict";var n=a("fc6a"),r=a("a691"),s=a("50c4"),i=a("a640"),c=a("ae40"),o=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,d=i("lastIndexOf"),f=c("indexOf",{ACCESSORS:!0,1:0}),p=u||!d||!f;t.exports=p?function(t){if(u)return l.apply(this,arguments)||0;var e=n(this),a=s(e.length),i=a-1;for(arguments.length>1&&(i=o(i,r(arguments[1]))),i<0&&(i=a+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}:l}}]);
//# sourceMappingURL=chunk-12d8c88a.5ff5d771.js.map